<div>
    <ion-item *ngIf="showView === 'calendar'">
        <ion-icon name="calendar" item-start>
        </ion-icon>
        <button ion-button clear (click)="showMonthView()" class="calendar-button">
            {{monthLabels[monthSelected-1]}}
        </button>
        <button ion-button clear (click)="showYearView()" class="calendar-button">
            {{yearSelected}}
        </button>

        <span item-end>
            <button ion-button clear (click)="previous()">
                <ion-icon name="ios-arrow-back"></ion-icon>
            </button>
            <button ion-button clear (click)="next()">
                <ion-icon name="ios-arrow-forward"></ion-icon>
            </button>
        </span>
    </ion-item>

    <ion-grid *ngIf="showView === 'calendar'">
        <ion-row>
            <ion-col *ngFor="let daylabel of dayLabels" text-center class="days-label">
                {{daylabel}}
            </ion-col>
        </ion-row>
        <ion-row *ngFor="let week of weeks">
            <ion-col *ngFor="let day of week" (click)="selectDay(day)" [class.current-item]="isToday(day.dayOfMonth)" [class.item-selected]="daySelected && day.dayIdentifier === daySelected.dayIdentifier"
                text-center>
                <span [class.not-this-month]="!day.inCalendar">{{day.dayOfMonth}}</span>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid *ngIf="showView === 'month'">
        <ion-row justify-content-end>
            <ion-col text-end>
                <button ion-button icon-only clear (click)="resetView()">
                    <ion-icon name="close"></ion-icon>
                </button>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col *ngFor="let monthLabel of monthLabels; let i = index" [class.current-item]="i === currentMonth - 1" [class.item-selected]="i === monthSelected - 1"
                class="months-label" col-3 (click)="selectMonth(i+1)" text-center>
                {{monthLabel}}
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid *ngIf="showView === 'year'">
        <ion-row>
            <ion-col col-10 text-center>
                    <div>
                        <button ion-button icon-only clear (click)="showPreviousYears()">
                            <ion-icon name="ios-arrow-back"></ion-icon>
                        </button>
                        <button ion-button clear [disabled]="true" class="year-range">
                            {{startYear}} to {{endYear}}
                        </button>
                    
                        <button ion-button icon-only clear (click)="showNextYears()">
                            <ion-icon name="ios-arrow-forward"></ion-icon>
                        </button>
                    </div>
            </ion-col>
            <ion-col col-2 text-center>
                <button ion-button icon-only clear (click)="resetView()">
                    <ion-icon name="close"></ion-icon>
                </button>
            </ion-col>
        </ion-row> 
        <ion-row>
            <ion-col *ngFor="let year of years" [class.current-item]="year === currentYear" [class.item-selected]="year === yearSelected" class="months-label"
                col-3 (click)="selectYear(year)" text-center>
                {{year}}
            </ion-col>
        </ion-row>
    </ion-grid>
</div>